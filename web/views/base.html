{{define "base"}}
<!DOCTYPE html>
<!-- saved from url=(0053)https://v4-alpha.getbootstrap.com/examples/dashboard/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="/static/remocc.png">

        <title>Remote Command and Control</title>
        <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/dashboard/">

        <!-- Bootstrap core CSS -->
        <link href="/static/bootstrap.min.css" rel="stylesheet">

        <!-- Custom styles for this template -->
        <link href="/static/dashboard.css" rel="stylesheet">


    </head>

    <body>
        <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
            <a class="navbar-brand" href="/">RemoCC</a>
            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/devices/">Alerts <span class="sr-only">(current)</span></a>
                    </li>
                </ul>
                <form class="form-inline mt-2 mt-md-0">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="">User</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/logout/">Logout <span class="sr-only">(current)</span></a>
                        </li>
                    </ul>
                </form>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="">Devices <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="">Apps</a>
                        </li>
                    </ul>
                </nav>

                <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">

                <div class="panel panel-primary">
                    <div class="panel-heading clearfix">
                        <h4 class="panel-title float-left" style="padding-top: 7.5px;">Devices</h4>
                        <div class="btn-group float-right">
                            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#newDeviceModal">
                                New Device
                            </button>
                            <!-- New device modal form -->
                            <div class="modal fade" id="newDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="newDevDet">Onboard new device</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form class="form-signin" >
                                                <label for="devName" class="sr-only">Device Name</label>
                                                <input type="text" name="devName" id="devName" class="form-control" placeholder="Short Name" required autofocus>
                                                <label for="macId" class="sr-only">mac address</label>
                                                <input type="text" name="macId" id="macId" class="form-control" placeholder="ab:cd:ef:12:34:56" required>
                                                <label for="devDescr" class="sr-only">Device Description</label>
                                                <input type="text" name="devDescr" id="devDescr" class="form-control" placeholder="Short description" required>
                                                <label for="sshKey" class="sr-only">SSH KEY</label>
                                                <input type="text" name="sshKey" id="sshKey" class="form-control" placeholder="id_rsa.pub key" required>
                                                <button class="btn btn-lg btn-primary btn-block" type="submit" onClick="newDevice()">Register Device</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#delDeviceModal">
                                Delete Device
                            </button>
                            <!-- Delete device modal form -->
                            <div class="modal fade" id="delDeviceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="delDevHead">Delete Device</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form class="form-signin" action="/device/" method="DELETE">
                                                <label for="delDevName" class="sr-only">Device Name</label>
                                                <input type="text" name="delDevName" id="delDevName" class="form-control" placeholder="Device Name" required autofocus>
                                                <label for="confDevName" class="sr-only">Confirm Device Name</label>
                                                <input type="text" name="confDevName" id="confDevName" class="form-control" placeholder="Confirm Device Name" required autofocus>
                                                <button class="btn btn-lg btn-primary btn-block" type="submit" onClick="deleteDevice()">Delete Device</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Mac Address</th>
                                <th>Description</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{template "yield" .}}
                        </tbody>
                    </table>
                </div>
                </main>
            </div>
        </div>

        <!-- Bootstrap core JavaScript
            ================================================== -->
            <!-- Placed at the end of the document so the pages load faster -->
            <script src="/static/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
            <script>window.jQuery || document.write('<script src="/static/jquery.min.js"><\/script>')</script>
            <script src="/static/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
            <script src="/static/bootstrap.min.js"></script>
            <script src="/static/jquery.min.js"></script>
            <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
            <script src="/static/ie10-viewport-bug-workaround.js"></script>

        <!-- submit create device form -->
        <script type="text/javascript">
            function newDevice(){
                $.ajax({
                    "type": 'POST',
                    "url": '/device/',
                    "data": {
                        "devName": $("#devName").val(),
                        "macId": $("#macId").val(),
                        "devDescr": $("#devDescr").val(),
                        "sshKey": $("#sshKey").val(),
                    },
                    "content-type": "application/x-www-form-urlencoded",

                });
            }
        </script>
        <!-- submit delete device form -->
        <script type="text/javascript">
            function deleteDevice(){
                $.ajax({
                    "type": 'DELETE',
                    "url": '/device?'+'devName='+ $("#delDevName").val()+'&confDevName='+ $("#confDevName").val(),
                    "content-type": "application/x-www-form-urlencoded",

                });
            }
</script>




    </body></html>
    {{end}}
